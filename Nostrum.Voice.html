<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.0">
    <meta name="project" content="Nostrum v0.5.0">

    <title>Nostrum.Voice â€” Nostrum v0.5.0</title>
    <link rel="stylesheet" href="dist/elixir-a816d167216329cc463d.css" />

    <script src="dist/sidebar_items-41e083ed2c.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-80aa23c1d96b6dc3c064.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
Nostrum
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.5.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


        <li><a id="tasks-list-link" href="#full-list"><span translate="no">Mix</span> Tasks</a></li>

    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Nostrum.Voice</span> 
  <small class="app-vsn" translate="no">(Nostrum v0.5.0)</small>

</h1>


  <section id="moduledoc">
<p>Interface for playing audio through Discord's voice channels.</p><h1>Using Discord Voice Channels</h1><p>To play sound in Discord with Nostrum, you'll need <code class="inline">ffmpeg</code> to be installed.
If you don't have the executable <code class="inline">ffmpeg</code> in the path, the absolute path may
be configured through config keys <code class="inline">:nostrum, :ffmpeg</code>. If you don't want to use
ffmpeg, read on to the next section.</p><p>A bot may be connected to at most one voice channel per guild. For this reason,
most of the functions in this module take a guild id, and the resulting action
will be performed in the given guild's voice channel that the bot is connected to.</p><p>The primary Discord gateway responsible for all text based communication relies on
one websocket connection per shard, where small bots typically only have one shard.
The Discord voice gateways work by establishing a websocket connection per guild/channel.
After some handshaking on this connection, audio data can be sent over UDP/RTP. Behind
the scenes the voice websocket connections are implemented nearly the same way the main
shard websocket connections are, and require no developer intervention.</p><h2 id="module-voice-without-ffmpeg" class="section-heading">
  <a href="#module-voice-without-ffmpeg" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Voice Without FFmpeg
</h2>
<p>If you wish to BYOE (Bring Your Own Encoder), there are a few options.</p><ul><li>Use <code class="inline">:raw</code> as <code class="inline">type</code> for <a href="#play/4"><code class="inline">Nostrum.Voice.play/4</code></a><ul><li>Provide the complete list of opus frames as the input</li></ul></li><li>Use <code class="inline">:raw_s</code> as <code class="inline">type</code> for <a href="#play/4"><code class="inline">Nostrum.Voice.play/4</code></a><ul><li>Provide a stateful enumerable of opus frames as input (think GenServer wrapped in <a href="https://hexdocs.pm/elixir/Stream.html#unfold/2"><code class="inline">Stream.unfold/2</code></a>)</li></ul></li><li>Use lower level functions to send opus frames at your leisure<ul><li>Send packets on your own time using <a href="#send_frames/2"><code class="inline">Nostrum.Voice.send_frames/2</code></a></li></ul></li></ul>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#child_spec/1" translate="no">child_spec(init_arg)</a>

        </div>

          <div class="summary-synopsis"><p>Returns a specification to start this module under a supervisor.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#connect_to_gateway/1" translate="no">connect_to_gateway(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Low-level. Manually connect to voice websockets gateway.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_channel_id/1" translate="no">get_channel_id(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Gets the id of the voice channel that the bot is connected to.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#join_channel/5" translate="no">join_channel(guild_id, channel_id, self_mute \\ false, self_deaf \\ false, persist \\ true)</a>

        </div>

          <div class="summary-synopsis"><p>Joins or moves the bot to a voice channel.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#leave_channel/1" translate="no">leave_channel(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Leaves the voice channel of the given guild id.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#listen/2" translate="no">listen(guild_id, num_packets)</a>

        </div>

          <div class="summary-synopsis"><p>Listen for incoming voice RTP packets.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#pause/1" translate="no">pause(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Pauses the current sound being played in a voice channel.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#play/4" translate="no">play(guild_id, input, type \\ :url, options \\ [])</a>

        </div>

          <div class="summary-synopsis"><p>Plays sound in the voice channel the bot is in.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#playing?/1" translate="no">playing?(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Checks if the bot is playing sound in a voice channel.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#ready?/1" translate="no">ready?(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Checks if the connection is up and ready to play audio.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#resume/1" translate="no">resume(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Resumes playing the current paused sound in a voice channel.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#send_frames/2" translate="no">send_frames(guild_id, frames)</a>

        </div>

          <div class="summary-synopsis"><p>Low-level. Send pre-encoded audio packets directly.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#set_is_speaking/2" translate="no">set_is_speaking(guild_id, speaking)</a>

        </div>

          <div class="summary-synopsis"><p>Low-level. Set speaking flag in voice channel.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#stop/1" translate="no">stop(guild_id)</a>

        </div>

          <div class="summary-synopsis"><p>Stops the current sound being played in a voice channel.</p></div>

      </div>

  </div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">child_spec(init_arg)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L41" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a specification to start this module under a supervisor.</p><p>See <a href="https://hexdocs.pm/elixir/Supervisor.html"><code class="inline">Supervisor</code></a>.</p>
  </section>
</section>
<section class="detail" id="connect_to_gateway/1">

  <div class="detail-header">
    <a href="#connect_to_gateway/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">connect_to_gateway(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L492" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.5.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">connect_to_gateway(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Low-level. Manually connect to voice websockets gateway.</p><p>This function should only be called if config option <code class="inline">:voice_auto_connect</code> is set to <code class="inline">false</code>.
By default Nostrum will automatically create a voice gateway when joining a channel.</p>
  </section>
</section>
<section class="detail" id="get_channel_id/1">

  <div class="detail-header">
    <a href="#get_channel_id/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_channel_id(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L438" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">get_channel_id(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>()</pre>

      </div>

<p>Gets the id of the voice channel that the bot is connected to.</p><h2 id="get_channel_id/1-parameters" class="section-heading">
  <a href="#get_channel_id/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild that the resultant channel belongs to.</li></ul><p>Returns the <code class="inline">channel_id</code> for the channel the bot is connected to, otherwise <code class="inline">nil</code>.</p><h2 id="get_channel_id/1-examples" class="section-heading">
  <a href="#get_channel_id/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.get_channel(123456789)
420691337

iex&gt; Nostrum.Voice.leave_channel(123456789)

iex&gt; Nostrum.Voice.get_channel(123456789)
nil</code></pre>
  </section>
</section>
<section class="detail" id="join_channel/5">

    <span id="join_channel/2"></span>

    <span id="join_channel/3"></span>

    <span id="join_channel/4"></span>

  <div class="detail-header">
    <a href="#join_channel/5" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">join_channel(guild_id, channel_id, self_mute \\ false, self_deaf \\ false, persist \\ true)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L84" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">join_channel(
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  <a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()
) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>() | :ok</pre>

      </div>

<p>Joins or moves the bot to a voice channel.</p><p>This function calls <a href="Nostrum.Api.html#update_voice_state/4"><code class="inline">Nostrum.Api.update_voice_state/4</code></a>.</p><p>The fifth argument <code class="inline">persist</code> defaults to <code class="inline">true</code>. When true, if calling <a href="#join_channel/5"><code class="inline">join_channel/5</code></a>
while already in a different channel in the same guild, the audio source will be persisted
in the new channel. If the audio is actively playing at the time of changing channels,
it will resume playing automatically upon joining. If there is an active audio source
that has been paused before changing channels, the audio be able to be resumed manually if
<a href="#resume/1"><code class="inline">resume/1</code></a> is called.</p><p>If <code class="inline">persist</code> is set to false, the audio source will be destroyed before changing channels.
The same effect is achieved by calling <a href="#stop/1"><code class="inline">stop/1</code></a> or <a href="#leave_channel/1"><code class="inline">leave_channel/1</code></a> before <a href="#join_channel/5"><code class="inline">join_channel/5</code></a></p>
  </section>
</section>
<section class="detail" id="leave_channel/1">

  <div class="detail-header">
    <a href="#leave_channel/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">leave_channel(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L107" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">leave_channel(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>() | :ok</pre>

      </div>

<p>Leaves the voice channel of the given guild id.</p><p>This function is equivalent to calling <code class="inline">Nostrum.Api.update_voice_state(guild_id, nil)</code>.</p>
  </section>
</section>
<section class="detail" id="listen/2">

  <div class="detail-header">
    <a href="#listen/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">listen(guild_id, num_packets)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L521" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.5.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">listen(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>()) ::
  [{<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()}] | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Listen for incoming voice RTP packets.</p><h2 id="listen/2-parameters" class="section-heading">
  <a href="#listen/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild that the bot is listening to.</li><li><code class="inline">num_packets</code> - Number of packets to wait for.</li></ul><p>Returns a list of 2-element tuples in the form <code class="inline">{rtp_header, opus_packet}</code>.</p><p>This function will block until the specified number of packets is received.</p>
  </section>
</section>
<section class="detail" id="pause/1">

  <div class="detail-header">
    <a href="#pause/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">pause(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L294" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">pause(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Pauses the current sound being played in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="pause/1-parameters" class="section-heading">
  <a href="#pause/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be paused in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to pause or no sound is playing, else <code class="inline">:ok</code>.</p><p>This function is similar to <a href="#stop/1"><code class="inline">stop/1</code></a>, except that the sound may be
resumed after being paused.</p><h2 id="pause/1-examples" class="section-heading">
  <a href="#pause/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;~/files/twelve_hour_loop_of_waterfall_sounds.mp3&quot;)

iex&gt; Nostrum.Voice.pause(123456789)</code></pre>
  </section>
</section>
<section class="detail" id="play/4">

    <span id="play/2"></span>

    <span id="play/3"></span>

  <div class="detail-header">
    <a href="#play/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">play(guild_id, input, type \\ :url, options \\ [])</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L194" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">play(
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>() | <a href="https://hexdocs.pm/elixir/Enum.html#t:t/0">Enum.t</a>(),
  :url | :pipe | :ytdl | :stream | :raw | :raw_s,
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()
) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Plays sound in the voice channel the bot is in.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="play/4-parameters" class="section-heading">
  <a href="#play/4-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be played in.</li><li><code class="inline">input</code> - Audio to be played. Type of <code class="inline">input</code> determined by <code class="inline">type</code> parameter.</li><li><code class="inline">type</code> - Type of input (defaults to <code class="inline">:url</code>).<ul><li><code class="inline">:url</code> Input will be <a href="https://www.ffmpeg.org/ffmpeg-protocols.html">any url that <code class="inline">ffmpeg</code> can read</a>.</li><li><code class="inline">:pipe</code> Input will be data that is piped to stdin of <code class="inline">ffmpeg</code>.</li><li><code class="inline">:ytdl</code> Input will be url for <code class="inline">youtube-dl</code>, which gets automatically piped to <code class="inline">ffmpeg</code>.</li><li><code class="inline">:stream</code> Input will be livestream url for <code class="inline">streamlink</code>, which gets automatically piped to <code class="inline">ffmpeg</code>.</li><li><code class="inline">:raw</code> Input will be an enumarable of raw opus frames. This bypasses <code class="inline">ffmpeg</code> and all options.</li><li><code class="inline">:raw_s</code> Same as <code class="inline">:raw</code> but input must be stateful, i.e. calling <a href="https://hexdocs.pm/elixir/Enum.html#take/2"><code class="inline">Enum.take/2</code></a> on input is not idempotent.</li></ul></li><li><code class="inline">options</code> - See options section below.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to play or a sound is playing, else <code class="inline">:ok</code>.</p><h2 id="play/4-options" class="section-heading">
  <a href="#play/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Options
</h2>
<ul><li><code class="inline">:start_pos</code> (string) - The start position of the audio to be played. Defaults to beginning.</li><li><code class="inline">:duration</code> (string) - The duration to of the audio to be played . Defaults to entire duration.</li><li><code class="inline">:realtime</code> (boolean) - Make ffmpeg process the input in realtime instead of as fast as possible. Defaults to true.</li><li><code class="inline">:volume</code> (number) - The output volume of the audio. Default volume is 1.0.</li><li><code class="inline">:filter</code> (string) - Filter(s) to be applied to the audio. No filters applied by default.</li></ul><p>  The values of <code class="inline">:start_pos</code> and <code class="inline">:duration</code> can be <a href="https://ffmpeg.org/ffmpeg-utils.html#Time-duration">any time duration that ffmpeg can read</a>.
  The <code class="inline">:filter</code> can be used multiple times in a single call (see examples).
  The values of <code class="inline">:filter</code> can be <a href="https://ffmpeg.org/ffmpeg-filters.html#Audio-Filters">any audio filters that ffmpeg can read</a>.
  Filters will be applied in order and can be as complex as you want. The world is your oyster!</p><p>  Note that using the <code class="inline">:volume</code> option is shortcut for the &quot;volume&quot; filter, and will be added to the end of the filter chain, acting as a master volume.
  Volume values between <code class="inline">0.0</code> and <code class="inline">1.0</code> act as standard oparating range where <code class="inline">0</code> is off and <code class="inline">1</code> is max.
  Values greater than <code class="inline">1.0</code> will add saturation and distortion to the audio.
  Negative values act the same as their position but reverse the polarity of the waveform.</p><p>  Having all the ffmpeg audio filters available is <em>extremely powerful</em> so it may be worth learning some of them for your use cases.
  If you use any filters to <em>increase</em> the playback speed of your audio, it's recommended to set the <code class="inline">:realtime</code> option to <code class="inline">false</code>
  because realtime processing is relative to the original playback speed.</p><h2 id="play/4-examples" class="section-heading">
  <a href="#play/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;~/music/FavoriteSong.mp3&quot;, :url)

iex&gt; Nostrum.Voice.play(123456789, &quot;~/music/NotFavoriteButStillGoodSong.mp3&quot;, :url, volume: 0.5)

iex&gt; Nostrum.Voice.play(123456789, &quot;~/music/ThisWillBeHeavilyDistorted.mp3&quot;, :url, volume: 1000)</code></pre><pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; raw_data = File.read!(&quot;~/music/sound_effect.wav&quot;)

iex&gt; Nostrum.Voice.play(123456789, raw_data, :pipe)</code></pre><pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;https://www.youtube.com/watch?v=b4RJ-QGOtw4&quot;, :ytdl,
...&gt;   realtime: true, start_pos: &quot;0:17&quot;, duration: &quot;30&quot;)

iex&gt; Nostrum.Voice.play(123456789, &quot;https://www.youtube.com/watch?v=0ngcL_5ekXo&quot;, :ytdl,
...&gt;   filter: &quot;lowpass=f=1200&quot;, filter: &quot;highpass=f=300&quot;, filter: &quot;asetrate=44100*0.5&quot;)</code></pre><pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;https://www.twitch.tv/pestily&quot;, :stream)

iex&gt; Nostrum.Voice.play(123456789, &quot;https://youtu.be/LN4r-K8ZP5Q&quot;, :stream)</code></pre>
  </section>
</section>
<section class="detail" id="playing?/1">

  <div class="detail-header">
    <a href="#playing?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">playing?(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L382" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">playing?(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Checks if the bot is playing sound in a voice channel.</p><h2 id="playing?/1-parameters" class="section-heading">
  <a href="#playing?/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild to check if audio being played.</li></ul><p>Returns <code class="inline">true</code> if the bot is currently being played in a voice channel, otherwise <code class="inline">false</code>.</p><h2 id="playing?/1-examples" class="section-heading">
  <a href="#playing?/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;https://a-real-site.biz/RickRoll.m4a&quot;)

iex&gt; Nostrum.Voice.playing?(123456789)
true

iex&gt; Nostrum.Voice.pause(123456789)

iex&gt; Nostrum.Voice.playing?(123456789)
false</code></pre>
  </section>
</section>
<section class="detail" id="ready?/1">

  <div class="detail-header">
    <a href="#ready?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">ready?(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L411" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">ready?(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Checks if the connection is up and ready to play audio.</p><h2 id="ready?/1-parameters" class="section-heading">
  <a href="#ready?/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild to check if voice connection is up.</li></ul><p>Returns <code class="inline">true</code> if the bot is connected to a voice channel, otherwise <code class="inline">false</code>.</p><p>This function does not check if audio is already playing. For that, use <a href="#playing?/1"><code class="inline">playing?/1</code></a>.</p><h2 id="ready?/1-examples" class="section-heading">
  <a href="#ready?/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.ready?(123456789)
true

iex&gt; Nostrum.Voice.leave_channel(123456789)

iex&gt; Nostrum.Voice.ready?(123456789)
false</code></pre>
  </section>
</section>
<section class="detail" id="resume/1">

  <div class="detail-header">
    <a href="#resume/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">resume(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L336" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">resume(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Resumes playing the current paused sound in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="resume/1-parameters" class="section-heading">
  <a href="#resume/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be resumed in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to resume or no sound has been paused, otherwise returns <code class="inline">:ok</code>.</p><p>This function is used to resume a sound that had previously been paused.</p><h2 id="resume/1-examples" class="section-heading">
  <a href="#resume/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;~/stuff/Toto - Africa (Bass Boosted)&quot;)

iex&gt; Nostrum.Voice.pause(123456789)

iex&gt; Nostrum.Voice.resume(123456789)</code></pre>
  </section>
</section>
<section class="detail" id="send_frames/2">

  <div class="detail-header">
    <a href="#send_frames/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">send_frames(guild_id, frames)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L473" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.5.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">send_frames(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), [<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()]) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Low-level. Send pre-encoded audio packets directly.</p><p>Speaking should be set to true via <a href="#set_is_speaking/2"><code class="inline">Nostrum.Voice.set_is_speaking/2</code></a> before sending frames.</p><p>Opus frames will be encrypted and prefixed with the appropriate RTP header and sent immediately.
The length of <code class="inline">frames</code> depends on how often you wish to send a sequence of frames.
A single frame contains 20ms of audio. Sending more than 50 frames (1 second of audio)
in a single function call may result in inconsistent playback rates.</p><p><a href="#playing?/1"><code class="inline">Nostrum.Voice.playing?/1</code></a> will not return accurate values when using <a href="#send_frames/2"><code class="inline">send_frames/2</code></a>
instead of <a href="#play/4"><code class="inline">Nostrum.Voice.play/4</code></a></p>
  </section>
</section>
<section class="detail" id="set_is_speaking/2">

  <div class="detail-header">
    <a href="#set_is_speaking/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_is_speaking(guild_id, speaking)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L456" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.5.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">set_is_speaking(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) :: :ok</pre>

      </div>

<p>Low-level. Set speaking flag in voice channel.</p><p>This function does not need to be called unless you are sending audio frames
directly using <a href="#send_frames/2"><code class="inline">Nostrum.Voice.send_frames/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="stop/1">

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">stop(guild_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L252" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">stop(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Stops the current sound being played in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="stop/1-parameters" class="section-heading">
  <a href="#stop/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Parameters
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be stopped in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to stop or no sound is playing, else <code class="inline">:ok</code>.</p><p>If a sound has finished playing, this function does not need to be called to start
playing another sound.</p><h2 id="stop/1-examples" class="section-heading">
  <a href="#stop/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a>
  Examples
</h2>
<pre><code class="Elixir">iex&gt; Nostrum.Voice.join_channel(123456789, 420691337)

iex&gt; Nostrum.Voice.play(123456789, &quot;http://brandthill.com/files/weird_dubstep_noises.mp3&quot;)

iex&gt; Nostrum.Voice.stop(123456789)</code></pre>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/nostrum/0.5.0" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/nostrum/0.5.0" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/nostrum/0.5.0/show/lib/nostrum/voice.ex">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.0) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
